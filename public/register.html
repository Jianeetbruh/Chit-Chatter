<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
</head>
<body>
    <h2>Register</h2>

    <input id="email" placeholder="Email"><br>
    <input id="pass" placeholder="Password" type="password"><br>
    <input id="username" placeholder="Username"><br>

    <button onclick="register()">Register</button>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    <script src="script.js"></script>

    <script>
        function register() {
            let email = email.value;
            let pass = pass.value;
            let uname = username.value;

            auth.createUserWithEmailAndPassword(email, pass)
            .then(async (userCred) => {
                let uid = userCred.user.uid;

                await db.collection("users").doc(uid).set({
                    username: uname,
                    email: email,
                    profilePic: "",
                    status: "Hey there! I am using Textchat",
                    friends: [],
                    friendRequests: [],
                    groups: []
                });

                alert("Registered!");
                window.location.href = "/chatting.html";
            })
            .catch(err => alert(err.message));
        }
    </script>
</body>
</html>
